---
title: "3:20:46 PM - November 27, 2025"
date: 2025-11-27T02:20:46.014Z
timestamp: 1764210046014
---

## Project Notes

**Upload Fix Session (2025-11-27)**

Found and fixed upload issues:

1. **Production Fix** - `blossom_upload_service.dart`:
   - Changed `base64.encode()` to `base64Url.encode()` for Nostr auth headers
   - BUD-01 spec requires base64url encoding, not regular base64
   - This was causing auth failures on Blossom servers

2. **Test Fixes** - `BlossomUploadResult` API change:
   - `cdnUrl` is now a getter (computed from `fallbackUrl ?? url`)
   - Constructor uses `fallbackUrl:` not `cdnUrl:`
   - Fixed in: upload_publish_e2e_comprehensive_test.dart, manual_thumbnail_test.dart, upload_manager_thumbnail_test.dart

Key distinction to remember:
- `BlossomUploadResult` - use `fallbackUrl:` in constructor, access via `cdnUrl` getter
- `PendingUpload` - has BOTH `cdnUrl` and `fallbackUrl` as direct fields
