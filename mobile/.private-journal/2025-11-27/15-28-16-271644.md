---
title: "3:28:16 PM - November 27, 2025"
date: 2025-11-27T02:28:16.271Z
timestamp: 1764210496271
---

## Project Notes

## Blossom 401 Investigation

Working on 401 error from blossom.divine.video upload.

**Fixes applied so far:**
1. Changed `base64.encode` to `base64Url.encode` (matching nostr_sdk implementation)
2. Added missing `size` tag to auth event (nostr_sdk includes this)

**Observations:**
- Event signing appears correct (validation passes locally)
- Server returns just `{error: unauthorized}` without detail
- Two different servers have been used historically:
  - `cf-stream-service-prod.protestnet.workers.dev` (old, possibly offline)
  - `blossom.divine.video` (current default)
  
**The auth event format:**
```
kind: 24242
tags: [t, upload], [expiration, timestamp], [x, hash]
content: "Upload video to Blossom server"
```

Missing from our implementation that nostr_sdk has:
- `size` tag (just added)

**Next steps:**
- Test with size tag fix
- Add more detailed logging of the actual Authorization header being sent
- Try testing with curl directly to the server
