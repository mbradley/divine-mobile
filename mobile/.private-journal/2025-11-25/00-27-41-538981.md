---
title: "12:27:41 AM - November 25, 2025"
date: 2025-11-25T06:27:41.538Z
timestamp: 1764052061538
---

## Project Notes

Fixed the "New Videos" tab not showing videos bug in OpenVine.

**Root Cause**: The `PopularNowFeed` provider was trying to subscribe to Nostr before the Nostr service was initialized. It used `VideoFeedBuilder` which waited up to 3 seconds for videos but the subscription failed silently because Nostr wasn't ready.

**Key insight from logs**: 
- `[VIDEO] Cannot subscribe - Nostr service not initialized (will retry when ready)` was happening BEFORE the app was ready
- The `VideoEvents` provider (for Popular tab) worked because it watches `appReadyProvider` and only subscribes when true

**Fix applied to `lib/providers/popular_now_feed_provider.dart`**:
1. Added import for `readiness_gate_providers.dart`
2. Watch `appReadyProvider` at the start of `build()`
3. If `!isAppReady`, return empty state immediately (provider will rebuild when appReady becomes true due to the watch)
4. Only proceed with VideoFeedBuilder subscription when app is ready

**Test updates**: Added `appReadyProvider.overrideWithValue(true)` to test container overrides, and added new test case for `appReady=false` behavior.

**Pattern to remember**: When creating new feed providers that need Nostr, always watch `appReadyProvider` and skip subscription until it's true. The watch ensures provider rebuilds automatically when the gate flips.
