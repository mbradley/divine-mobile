---
title: "7:42:00 AM - November 10, 2025"
date: 2025-11-10T06:42:00.210Z
timestamp: 1762756920210
---

## Project Notes

## M3U8 to MP4 Resolution Task (Nov 10, 2025)

Rabble wants direct MP4 playback instead of HLS for short videos. Makes total sense - 6 second videos don't benefit from adaptive streaming.

**Key Decision**: Where to put the resolver?
- Option A: In `VideoEvent.fromNostrEvent()` - synchronous, blocks event parsing
- Option B: In `VideoEventService` - async, can preload in background
- Option C: New `M3u8ResolverService` called from both places

Going with Option C - create a service that can be used anywhere. Start with sync resolution in VideoEvent parsing since we need the URL before displaying video.

**Files to modify:**
- `lib/services/m3u8_resolver_service.dart` (NEW)
- `lib/models/video_event.dart` (integrate resolver)
- `test/services/m3u8_resolver_service_test.dart` (NEW)

**Testing Strategy:**
- Unit test m3u8 parser with sample playlists
- Test relative URL resolution
- Test error handling (network failures, invalid playlists)
- No mocks - use real HTTP requests in tests

