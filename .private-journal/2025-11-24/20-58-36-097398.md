---
title: "8:58:36 PM - November 24, 2025"
date: 2025-11-25T02:58:36.097Z
timestamp: 1764039516097
---

## Project Notes

Fixed two major issues today:

1. **Comments not loading** - The subscription_manager.dart was dropping `e` and `p` tags when reconstructing filters for cache optimization. This was critical because comment subscriptions use `e: [rootEventId]` to filter comments for specific videos. Fixed by adding `e: filter.e` and `p: filter.p` to all three places where filters are reconstructed (lines 143-144, 191-192, 208-209).

2. **NIP-71 kind compliance** - OpenVine was still requesting kinds 22, 21, 34236, 34235 from relays but should only use kind 34236 (addressable short videos). Fixed by updating NIP71VideoKinds class and hardcoded filter arrays in relay_diagnostic_screen.dart, nostr_service.dart, and video_event_service.dart.

Key learning: When modifying filters in middleware/manager code, always preserve ALL filter properties, not just the commonly-used ones. The `e` and `p` tags are critical for comment and notification subscriptions.
